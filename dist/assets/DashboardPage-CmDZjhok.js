import{j as e,r as x,S,u as C,L as b,a as A,b as E,c as y}from"./index-Bx6DPSim.js";import{G,T as u}from"./index-BTdfOqQp.js";const k=({subject:t,onClick:n})=>e.jsxs("div",{onClick:n,className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer flex flex-col overflow-hidden group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-32 object-cover transition-transform group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"})]}),e.jsxs("div",{className:"p-4 flex flex-col items-center text-center flex-grow relative",children:[e.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-white p-2 rounded-full shadow-lg border-4 border-white",children:e.jsx("span",{className:"text-4xl",children:t.emoji})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mt-6",children:t.name}),e.jsx("p",{className:"text-gray-600 mt-2 text-sm",children:t.description})]})]}),j=new G({apiKey:"PLACEHOLDER_API_KEY"}),v=(t="WAEC")=>`You are an expert Nigerian secondary school teacher and exam preparer. Your task is to generate high-quality educational content.
  - Your responses must be clear, accurate, and tailored for the SS3 curriculum.
  - For questions, strictly adhere to the specified exam style (${t}).
  - For lessons, provide comprehensive explanations with relevant Nigerian examples.`;async function q(t,n){try{const r=`Generate a detailed lesson plan for the SS3 topic "${t}" in the subject "${n}". The lesson should include:
        1. An introduction to the topic.
        2. Key learning objectives.
        3. A detailed explanation of core concepts with examples relevant to Nigeria.
        4. A summary of the main points.`;return(await j.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{systemInstruction:v(),temperature:.5}})).text}catch(r){return console.error("Error generating lesson from DeepSeek service:",r),"Sorry, an error occurred while generating the lesson. Please try again later."}}async function L(t,n,r="WAEC",o=5){try{const l=`Generate ${o} ${r}-style multiple-choice questions on the topic "${t}" for the subject "${n}".
        Each question must have 4 options and a single correct answer.
        The difficulty should be appropriate for an SS3 student preparing for their final exams.`,g=(await j.models.generateContent({model:"gemini-2.5-flash",contents:l,config:{systemInstruction:v(r),responseMimeType:"application/json",responseSchema:{type:u.OBJECT,properties:{questions:{type:u.ARRAY,items:{type:u.OBJECT,properties:{question:{type:u.STRING},options:{type:u.ARRAY,items:{type:u.STRING}},correctAnswer:{type:u.STRING}},required:["question","options","correctAnswer"]}}},required:["questions"]}}})).text.trim();return JSON.parse(g).questions}catch(l){return console.error(`Error generating ${r} questions from DeepSeek service:`,l),null}}const T=({subject:t,onClose:n,onStartChat:r,onStartQuiz:o})=>{const[l,i]=x.useState(!1),[g,d]=x.useState(null),[c,m]=x.useState(null),s=async()=>{i(!0),d(null),m(null);try{const a=await q(t.name,t.name);m({type:"lesson",data:a})}catch{d("Failed to generate the lesson. Please try again.")}finally{i(!1)}},p=async()=>{i(!0),d(null),m(null);try{const a=await L(t.details[0],t.name,"WAEC",3);a?m({type:"quiz",data:a}):d("Could not generate questions for this topic.")}catch{d("Failed to generate questions. Please try again.")}finally{i(!1)}},N=()=>c?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:c.type==="lesson"?`Lesson: ${t.name}`:"WAEC Practice Questions"}),e.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md",children:"Back"})]}),e.jsxs("div",{className:"max-h-96 overflow-y-auto pr-2",children:[c.type==="lesson"&&e.jsx("div",{className:"prose prose-sm max-w-none whitespace-pre-wrap text-gray-700",children:c.data}),c.type==="quiz"&&e.jsx("div",{className:"space-y-6",children:c.data.map((a,f)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("p",{className:"font-semibold text-gray-800",children:[f+1,". ",a.question]}),e.jsx("ul",{className:"list-disc list-inside mt-2 space-y-1 text-sm",children:a.options.map(h=>e.jsx("li",{className:`${h===a.correctAnswer?"text-green-700 font-bold":"text-gray-600"}`,children:h},h))})]},f))})]})]}):null,w=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("span",{className:"text-5xl mr-4",children:t.emoji}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:t.name})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:t.description}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Topics you can learn:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-600 mb-8",children:t.details.map(a=>e.jsx("li",{children:a},a))}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>{r(t.name),n()},className:"px-4 py-2 text-base font-medium text-white bg-green-600 rounded-md hover:bg-green-700",children:"Start Chat"}),e.jsx("button",{onClick:()=>{o(t.name),n()},className:"px-4 py-2 text-base font-medium text-green-700 bg-green-100 rounded-md hover:bg-green-200",children:"Take Quiz"}),e.jsx("button",{onClick:s,className:"px-4 py-2 text-base font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Generate Lesson"}),e.jsx("button",{onClick:p,className:"px-4 py-2 text-base font-medium text-blue-700 bg-blue-100 rounded-md hover:bg-blue-200",children:"WAEC Questions"})]}),e.jsx("button",{onClick:n,className:"w-full mt-3 px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md",children:"Close"})]});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",onClick:n,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-lg w-full m-4 relative",onClick:a=>a.stopPropagation(),children:[l&&e.jsxs("div",{className:"absolute inset-0 bg-white bg-opacity-80 flex flex-col justify-center items-center rounded-lg z-10",children:[e.jsx(S,{className:"w-12 h-12"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Generating content..."})]}),g&&e.jsx("p",{className:"text-red-500 text-center mb-4",children:g}),c?N():w()]})})},$=()=>{const{language:t,setLanguage:n}=C(),r=o=>{const l=b.find(i=>i.code===o.target.value);l&&n(l)};return e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:t.code,onChange:r,className:"appearance-none bg-gray-100 border border-gray-300 rounded-md py-2 pl-3 pr-8 text-sm font-medium text-gray-700 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-green-500","aria-label":"Select language",children:b.map(o=>e.jsxs("option",{value:o.code,children:[o.emoji," ",o.name]},o.code))}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})})})]})},z=()=>{const{user:t}=A(),n=E(),[r,o]=x.useState(null),[l,i]=x.useState("All"),g=x.useMemo(()=>{const s=new Set;return y.forEach(p=>s.add(p.category??"General")),["All",...Array.from(s)]},[]),d=x.useMemo(()=>l==="All"?y:y.filter(s=>(s.category??"General")===l),[l]);if(!t)return n("/login"),null;const c=s=>{n(`/chat/${encodeURIComponent(s)}`)},m=s=>{n(`/quiz/${encodeURIComponent(s)}`)};return e.jsxs("div",{className:"container mx-auto p-4 md:p-8",children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 capitalize",children:["Hello, ",t.name,"!"]}),e.jsx("p",{className:"text-gray-600",children:"What would you like to learn today?"})]}),e.jsx($,{})]}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Filter:"}),e.jsx("select",{value:l,onChange:s=>i(s.target.value),className:"border rounded px-2 py-1",children:g.map(s=>e.jsx("option",{value:s,children:s},s))})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:d.map(s=>e.jsx(k,{subject:s,onClick:()=>o(s)},s.name))}),r&&e.jsx(T,{subject:r,onClose:()=>o(null),onStartChat:c,onStartQuiz:m})]})};export{z as default};
